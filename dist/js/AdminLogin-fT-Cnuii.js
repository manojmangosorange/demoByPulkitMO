import{j as s}from"./chunk-aAkv6woa.js";import{r as e}from"./chunk-CRvknJha.js";import{o as a,s as r,f as n,i,C as l,a as d,b as c,d as o,c as t,j as m,k as x,l as j,m as h,n as u,I as p,p as f,B as w,r as g,J as y}from"../assets/index-BdECdtOY.js";import{T as b,a as v,b as N,c as P}from"./chunk-DNG7ZfCr.js";import{au as S,B as E}from"./chunk-CwPyCuk6.js";import{a as k,L as A}from"./chunk-KSTQTUbB.js";import"./chunk-DbexCMFd.js";import"./chunk-DdJ5UvfL.js";import"./chunk-Djsr9rkS.js";const C=a({email:r().email("Please enter a valid email"),password:r().min(6,"Password must be at least 6 characters")}),I=a({name:r().min(1,"Please enter your name"),email:r().email("Please enter a valid email"),password:r().min(6,"Password must be at least 6 characters"),confirmPassword:r(),adminEmail:r().email("Please enter a valid admin email"),adminPassword:r().min(6,"Admin password must be at least 6 characters")}).refine(s=>s.password===s.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),O=()=>{const[a,r]=e.useState(!1),[O,B]=e.useState("login"),J=k(),L=n({resolver:i(C),defaultValues:{email:"",password:""}}),V=n({resolver:i(I),defaultValues:{name:"",email:"",password:"",confirmPassword:"",adminEmail:"",adminPassword:""}});return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 via-background to-secondary/5 flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsx("div",{className:"mb-6",children:s.jsxs(A,{to:"/",className:"inline-flex items-center gap-2 text-sm text-gray-800 hover:text-primary transition-colors",children:[s.jsx(S,{className:"w-4 h-4"}),"Back to Website"]})}),s.jsxs(l,{className:"shadow-xl border-0 bg-card/50 backdrop-blur-sm",children:[s.jsxs(d,{className:"text-center pb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-primary-glow rounded-xl flex items-center justify-center mx-auto mb-4",children:s.jsx(E,{className:"w-6 h-6 text-primary-foreground"})}),s.jsx(c,{className:"text-2xl",children:"MangosOrange Admin"}),s.jsx(o,{children:"Career Management System"})]}),s.jsx(t,{children:s.jsxs(b,{value:O,onValueChange:B,children:[s.jsxs(v,{className:"grid w-full grid-cols-2",children:[s.jsx(N,{value:"login",children:"Login"}),s.jsx(N,{value:"signup",children:"Sign Up"})]}),s.jsx(P,{value:"login",className:"space-y-4 mt-6",children:s.jsx(m,{...L,children:s.jsxs("form",{onSubmit:L.handleSubmit(async s=>{r(!0);try{const e=await g.signIn(s.email,s.password);e?(localStorage.setItem("admin_user",JSON.stringify(e)),y.success("Welcome back!"),"Admin"===e.role?J("/admin/dashboard"):J("/admin")):y.error("Invalid credentials")}catch(e){y.error("Login failed")}finally{r(!1)}}),className:"space-y-4",children:[s.jsx(x,{control:L.control,name:"email",render:({field:e})=>s.jsxs(j,{children:[s.jsx(h,{children:"Email"}),s.jsx(u,{children:s.jsx(p,{placeholder:"Enter your email",...e})}),s.jsx(f,{})]})}),s.jsx(x,{control:L.control,name:"password",render:({field:e})=>s.jsxs(j,{children:[s.jsx(h,{children:"Password"}),s.jsx(u,{children:s.jsx(p,{type:"password",placeholder:"Enter password",...e})}),s.jsx(f,{})]})}),s.jsx(w,{type:"submit",className:"w-full",disabled:a,children:a?"Signing in...":"Sign In"})]})})}),s.jsx(P,{value:"signup",className:"space-y-4 mt-6",children:s.jsx(m,{...V,children:s.jsxs("form",{onSubmit:V.handleSubmit(async s=>{r(!0);try{if(!(await g.verifyAdminCredentials(s.adminEmail,s.adminPassword)))return void y.error("Invalid admin credentials. Only admins can create accounts.");const e=await g.signUp(s.email,s.password,"Recruiter",s.name);e?(localStorage.setItem("admin_user",JSON.stringify(e)),y.success("Account created successfully!"),"Admin"===e.role?J("/admin/dashboard"):J("/admin")):y.error("Failed to create account")}catch(e){y.error("Signup failed")}finally{r(!1)}}),className:"space-y-4",children:[s.jsx(x,{control:V.control,name:"name",render:({field:e})=>s.jsxs(j,{children:[s.jsx(h,{children:"Full Name"}),s.jsx(u,{children:s.jsx(p,{placeholder:"Enter your full name",...e})}),s.jsx(f,{})]})}),s.jsx(x,{control:V.control,name:"email",render:({field:e})=>s.jsxs(j,{children:[s.jsx(h,{children:"Email"}),s.jsx(u,{children:s.jsx(p,{placeholder:"Enter your email",...e})}),s.jsx(f,{})]})}),s.jsx(x,{control:V.control,name:"password",render:({field:e})=>s.jsxs(j,{children:[s.jsx(h,{children:"Password"}),s.jsx(u,{children:s.jsx(p,{type:"password",placeholder:"Enter password",...e})}),s.jsx(f,{})]})}),s.jsx(x,{control:V.control,name:"confirmPassword",render:({field:e})=>s.jsxs(j,{children:[s.jsx(h,{children:"Confirm Password"}),s.jsx(u,{children:s.jsx(p,{type:"password",placeholder:"Re-enter password",...e})}),s.jsx(f,{})]})}),s.jsxs("div",{className:"border-t pt-4 mt-4",children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Admin verification required to create accounts:"}),s.jsx(x,{control:V.control,name:"adminEmail",render:({field:e})=>s.jsxs(j,{children:[s.jsx(h,{children:"Admin Email"}),s.jsx(u,{children:s.jsx(p,{placeholder:"Enter admin email",...e})}),s.jsx(f,{})]})}),s.jsx(x,{control:V.control,name:"adminPassword",render:({field:e})=>s.jsxs(j,{children:[s.jsx(h,{children:"Admin Password"}),s.jsx(u,{children:s.jsx(p,{type:"password",placeholder:"Enter admin password",...e})}),s.jsx(f,{})]})})]}),s.jsx(w,{type:"submit",className:"w-full",disabled:a,children:a?"Creating account...":"Create Account"})]})})})]})})]})]})})};export{O as default};
